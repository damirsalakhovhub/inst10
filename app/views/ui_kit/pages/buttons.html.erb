<%
  variants = [:basic, :primary, :ghost]
  sizes = [:tiny, :small, :medium, :large, :xlarge]
  button_templates = [
    { text: "Button" },
    { text: "Like", icon: "heart", icon_position: :left },
    { text: "Like", icon: "heart", icon_position: :right },
    { icon: "heart", icon_mode: :icon_only, aria: { label: "Like" } }
  ]
%>

<%= render "ui_kit/shared/layout" do %>
  <main class="ui-kit-main">
    <h1>Buttons</h1>

    <section class="ui-kit-section">
      <h2>Classic Buttons (No ViewComponent - 37signals style)</h2>
      <% variants.each do |variant| %>
        <h3><%= variant.to_s.capitalize %></h3>
        <div class="ui-kit-element-group">
          <% sizes.each do |size| %>
            <div class="ui-kit-row">
              <% size_class = size == :medium ? "" : "btn-#{size}" %>
              <% variant_class = variant == :basic ? "btn btn-basic" : "btn btn-#{variant}" %>
              <% button_class = [variant_class, size_class].compact.join(" ") %>
              
              <%# Text only button %>
              <%= button_tag "Button", class: button_class %>
              
              <%# Like with icon left %>
              <% icon_path = Rails.root.join("ui_kit/assets/images/icons/heart-icon.svg") %>
              <% if File.exist?(icon_path) %>
                <% icon_svg = File.read(icon_path).gsub(/\s(width|height)=["'][^"']*["']/, '').gsub(/<svg/, '<svg style="width: 100%; height: 100%;" class="btn-icon-svg"').html_safe %>
                <%= button_tag class: button_class do %>
                  <span class="btn-icon"><%= icon_svg %></span>
                  <span class="btn-text">Like</span>
                <% end %>
              <% else %>
                <%= button_tag "Like", class: button_class %>
              <% end %>
              
              <%# Like with icon right %>
              <% if File.exist?(icon_path) %>
                <%= button_tag class: button_class do %>
                  <span class="btn-text">Like</span>
                  <span class="btn-icon"><%= icon_svg %></span>
                <% end %>
              <% else %>
                <%= button_tag "Like", class: button_class %>
              <% end %>
              
              <%# Icon only %>
              <% if File.exist?(icon_path) %>
                <%= button_tag class: "#{button_class} btn-icon-only", aria: { label: "Like" } do %>
                  <span class="btn-icon"><%= icon_svg %></span>
                <% end %>
              <% end %>
            </div>
          <% end %>
        </div>
      <% end %>
    </section>

    <% variants.each do |variant| %>
      <section class="ui-kit-section">
        <h2><%= variant.to_s.capitalize %> (ViewComponent)</h2>
        <div class="ui-kit-element-group">
          <% sizes.each do |size| %>
            <div class="ui-kit-row">
              <% button_templates.each do |template| %>
                <%= render Button::ButtonComponent.new(**template.merge(variant: variant, size: size)) %>
              <% end %>
            </div>
          <% end %>
        </div>
      </section>
    <% end %>

    <%# Rounded buttons %>
    <section class="ui-kit-section">
      <h2>Rounded</h2>
      <div class="ui-kit-element-group">
        <% [:basic, :primary].each do |variant| %>
          <% [:medium, :large].each do |size| %>
            <div class="ui-kit-row">
              <% button_templates.each do |template| %>
                <%= render Button::ButtonComponent.new(**template.merge(variant: variant, size: size, rounded: true)) %>
              <% end %>
            </div>
          <% end %>
        <% end %>
      </div>
    </section>
  </main>
<% end %>
