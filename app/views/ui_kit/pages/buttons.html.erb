<%= render "ui_kit/shared/layout" do %>
  <main class="ui-kit-main">
    <h1>Buttons</h1>

    <% icon_path = Rails.root.join("app/assets/images/icons/heart-icon.svg") %>
    <% if File.exist?(icon_path) %>
      <% icon_svg = File.read(icon_path).gsub(/\s(width|height)=["'][^"']*["']/, '').gsub(/<svg/, '<svg class="btn-icon-svg"').html_safe %>
    <% end %>

    <%# Sizes definition for demo rows %>
    <% sizes = [
      [:tiny, "Tiny"], 
      [:small, "Small"], 
      [nil, "Default"],
      [:large, "Large"]
    ] %>

    <% sections = [
      { title: "Base",     variant: nil,       rounded: false, disabled: false },
      { title: "Primary",  variant: :primary,  rounded: false, disabled: false },
      { title: "Rounded",  variant: nil,       rounded: true,  disabled: false },
      { title: "Disabled", variant: nil,       rounded: false, disabled: true }
    ] %>

    <% sections.each do |section| %>
      <section class="ui-kit-section">
        <h2><%= section[:title] %></h2>
        <div class="ui-kit-element-group">
          <% sizes.each do |size_key, label| %>
            <div class="ui-kit-row">
              <span class="ui-kit-row-label"><%= label %></span>
              <div class="ui-kit-row-content">
                <%= render "shared/button", text: "Like", size: size_key, variant: section[:variant], rounded: section[:rounded], disabled: section[:disabled] %>
                <% if icon_svg.present? %>
                  <%= render "shared/button", text: "Like", icon_left: icon_svg, size: size_key, variant: section[:variant], rounded: section[:rounded], disabled: section[:disabled] %>
                  <%= render "shared/button", text: "Like", icon_right: icon_svg, size: size_key, variant: section[:variant], rounded: section[:rounded], disabled: section[:disabled] %>
                  <%= render "shared/button", icon_left: icon_svg, icon_only: true, size: size_key, variant: section[:variant], rounded: section[:rounded], disabled: section[:disabled], aria: { label: "Like" } %>
                <% end %>
              </div>
            </div>
          <% end %>
        </div>
      </section>
    <% end %>

    <%# Loading state %>
    <section class="ui-kit-section" data-controller="loading-button">
      <h2>Loading</h2>
      <div class="ui-kit-element-group">
        <% sizes.each do |size_key, label| %>
          <div class="ui-kit-row">
            <span class="ui-kit-row-label"><%= label %></span>
            <div class="ui-kit-row-content">
              <%= render "shared/button", text: "Submit", size: size_key, variant: nil, loader: true, extra_class: "btn-loading-demo" %>
              <% if icon_svg.present? %>
                <%= render "shared/button", text: "Like", icon_left: icon_svg, size: size_key, variant: nil, loader: true, extra_class: "btn-loading-demo" %>
                <%= render "shared/button", icon_left: icon_svg, icon_only: true, size: size_key, variant: nil, loader: true, extra_class: "btn-loading-demo", aria: { label: "Like" } %>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
    </section>

    <% unless icon_svg.present? %>
      <section class="ui-kit-section">
        <h2>Icons</h2>
        <div class="ui-kit-element-group">
          <div class="ui-kit-row">
            <%= button_tag "Add heart-icon.svg to see icons", class: "btn" %>
          </div>
        </div>
      </section>
    <% end %>
  </main>
<% end %>
