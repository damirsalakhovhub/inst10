
<% dialog_id = local_assigns[:id] || "dialog-#{SecureRandom.hex(4)}" %>
<% title_id = "#{dialog_id}-title" %>
<% dialog_open = local_assigns[:open] ? "open" : "" %>
<% dialog_data_attrs = "" %>
<% if local_assigns[:data] %>
  <% local_assigns[:data].each do |k, v| %>
    <% dialog_data_attrs += "data-#{k}=\"#{v}\" " %>
  <% end %>
<% end %>

<dialog id="<%= dialog_id %>"
        role="dialog"
        aria-modal="true"
        aria-labelledby="<%= title_id %>"
        <%= dialog_open %>
        data-dialog-target="dialog"
        data-action="click->dialog#handleBackdropClick"
        <%= dialog_data_attrs %>>
  <div class="dialog-container">
    <%# Header with title and close button %>
    <header class="dialog-header">
      <h2 id="<%= title_id %>" class="dialog-title">
        <%= local_assigns[:title] %>
      </h2>
      <% close_icon_path = Rails.root.join("ui_kit/assets/images/icons/close-icon.svg") %>
      <% if File.exist?(close_icon_path) %>
        <% close_icon_svg = File.read(close_icon_path).gsub(/\s(width|height)=["'][^"']*["']/, '').gsub(/<svg/, '<svg style="width: 100%; height: 100%;" class="btn-icon-svg"').html_safe %>
        <button type="button"
                class="btn btn-ghost btn-medium dialog-close"
                aria-label="Close dialog"
                data-action="dialog#close">
          <span class="btn-icon"><%= close_icon_svg %></span>
        </button>
      <% else %>
        <button type="button"
                class="btn btn-ghost btn-medium dialog-close"
                aria-label="Close dialog"
                data-action="dialog#close">
          Ã—
        </button>
      <% end %>
    </header>

    <%# Main content area %>
    <main class="dialog-main">
      <%= local_assigns[:body] if local_assigns[:body].present? %>
    </main>
    
    <%# Footer with action buttons %>
    <footer class="dialog-footer">
      <button type="button"
              class="btn btn-default"
              aria-label="Close dialog"
              data-action="dialog#close">
        Close
      </button>
      <button type="button"
              class="btn btn-primary">
        Action
      </button>
    </footer>
  </div>
</dialog>

