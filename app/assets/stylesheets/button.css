/* ============================================================================
   Base Button (Default: 40px)
   ============================================================================ */

.btn {
  /* Icon size tokens */
  --btn-icon-size-tiny: var(--px-16);
  --btn-icon-size-small: var(--px-20);
  --btn-icon-size-default: var(--px-24);

  /* Layout */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--px-4);
  
  /* Spacing */
  padding-inline: .75em;
  
  /* Dimensions & Typography */
  --btn-height: var(--px-40);
  height: var(--btn-height);
  font-size: var(--font-size-l);
  line-height: 1; /* Reset line-height to use height/flex for centering */
  font-weight: 500;
  
  /* Appearance */
  background-color: var(--element-color-bg);
  border-radius: var(--element-radius);
  
  /* Variables */
  --btn-icon-size: var(--btn-icon-size-default);
  --optical-compensation: 0.25em;
  
  /* Animation */
  transition: background-color 0.1s linear;

  /* States */
  &:hover:not(:disabled) {
    background-color: var(--element-color-bg-hover);
  }

  &:active:not(:disabled) {
    background-color: var(--element-color-bg-active);
    transform: translateY(1px);
  }

  &:focus-visible {
    outline: 2px solid var(--color-outline-uno);
  }

  &:disabled {
    background-color: var(--disabled-color-bg);
    color: var(--disabled-color-font);
    cursor: not-allowed;
  }
}

/* ============================================================================
   Icons
   ============================================================================ */

.btn-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  width: var(--btn-icon-size);
  height: var(--btn-icon-size);
  color: inherit;
}

.btn-icon svg,
.btn-icon .btn-icon-svg {
  width: 100%;
  height: 100%;
  display: block;
  stroke: currentColor;
  fill: none;
  stroke-width: 2;
}

/* Icon Position */
.btn-icon-left {
  order: -1;
}
.btn-icon-right {
  order: 1;
}

/* Icon-only Button (square) */
.btn-icon-only {
  width: var(--btn-height);
  min-width: var(--btn-height);
  padding: 0;
  justify-content: center;
}

/* Optical Compensation: add extra padding on the side without icon */
.btn:not(.btn-icon-only):has(.btn-icon-left) {
  padding-inline-end: calc(.75em + var(--optical-compensation));
}

.btn:not(.btn-icon-only):has(.btn-icon-right) {
  padding-inline-start: calc(.75em + var(--optical-compensation));
}


/* ============================================================================
   Sizes
   ============================================================================ */

.btn-small {
  --btn-height: var(--px-32);
  height: var(--btn-height);
  font-size: var(--font-size-m);
  padding-inline: var(--element-padding-inline);
  --btn-icon-size: var(--btn-icon-size-small);
}

.btn-tiny {
  --btn-height: var(--px-24);
  height: var(--btn-height);
  font-size: var(--font-size-s);
  padding-inline: var(--element-padding-inline);
  --btn-icon-size: var(--btn-icon-size-tiny);
}

/* Override optical compensation for smaller sizes (using their specific padding) */
.btn-small:not(.btn-icon-only):has(.btn-icon-left),
.btn-tiny:not(.btn-icon-only):has(.btn-icon-left) {
  padding-inline-end: calc(var(--element-padding-inline) + var(--optical-compensation));
}
.btn-small:not(.btn-icon-only):has(.btn-icon-right),
.btn-tiny:not(.btn-icon-only):has(.btn-icon-right) {
  padding-inline-start: calc(var(--element-padding-inline) + var(--optical-compensation));
}


/* ============================================================================
   Variants
   ============================================================================ */

/* Primary Variant */
.btn-primary {
  background-color: var(--color-bg-primary);
  color: var(--white);
}

.btn-primary:hover:not(:disabled) {
  background-color: var(--color-bg-primary-hover);
}

.btn-primary:active:not(:disabled) {
  background-color: var(--color-bg-primary-active);
}

/* Contrast Variant */
.btn-contrast {
  background-color: var(--color-bg-invert);
  color: var(--color-font-invert);
  
  &:hover:not(:disabled) {
    background-color: var(--color-bg-invert-hover);
  }

  &:active:not(:disabled) {
    background-color: var(--color-bg-invert-active);
  }
}

/* ============================================================================
   Modifiers
   ============================================================================ */

/* Rounded Button */
.btn-rounded {
  border-radius: var(--radius-full);
}
